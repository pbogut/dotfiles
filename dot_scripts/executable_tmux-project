#!/usr/bin/env bash
#=================================================
# name:   tmux-project
# author: author <author_contact>
# date:   26/04/2023
#=================================================
project=false
if [[ $TERM == "dumb" ]]; then
    project=$(ls-project | sed -E "s;(.*);\1\x00icon\x1f$ICONS/git.svg;" | fuzzel --dmenu --no-sort --search "$1" --cache /dev/null)
else
    project=$(ls-project | fzf -q "$1" --height=100%)
fi

if [[ ! $project == "" ]]; then
    cd "$PROJECTS/$project" || exit
    touch -h "$PROJECTS/$project"
    if [[ $TERM == "dumb" ]]; then
        terminal -c project -e tmux-vim
    else
        tmux-vim
    fi
fi
